---
phase: 34-german-umlaut-correction
plan: 02
type: execute
wave: 2
depends_on: ["34-01"]
files_modified:
  - src/**/*.tsx
  - src/**/*.ts
  - supabase/**/*.sql
autonomous: true

must_haves:
  truths:
    - "No German text contains ae/oe/ue substitutions in UI strings"
    - "German umlauts display correctly in all UI text"
    - "TypeScript compiles without errors after corrections"
    - "Application renders German text correctly"
  artifacts:
    - path: "src/components/**/*.tsx"
      provides: "UI components with corrected German text"
      pattern: "ä|ö|ü|Ä|Ö|Ü"
    - path: "src/lib/**/*.ts"
      provides: "Library code with corrected German text"
      pattern: "ä|ö|ü|Ä|Ö|Ü"
  key_links:
    - from: "source files"
      to: "browser rendering"
      via: "UTF-8 encoding"
      pattern: "charset.*utf-8"
---

<objective>
Replace all German ae/oe/ue substitutions with proper umlauts across the entire codebase.

Purpose: Ensures German text displays correctly for users, improving readability and professionalism.
Output: All 117+ occurrences of ae/oe/ue in German words replaced with proper umlauts.
</objective>

<execution_context>
@C:\Users\Mario Giacchino\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Mario Giacchino\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/34-german-umlaut-correction/34-RESEARCH.md
@.planning/phases/34-german-umlaut-correction/34-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace German umlauts in source files</name>
  <files>src/**/*.{ts,tsx}</files>
  <action>
Apply dictionary-based replacements for German words. Use EXACT word matches to avoid false positives with English words (true, value, queue, blue, route, continue).

**German words to correct (from research + codebase scan):**

| Find | Replace |
|------|---------|
| Aenderung | Änderung |
| aenderung | änderung |
| Aenderungsauftrag | Änderungsauftrag |
| aenderungsauftrag | änderungsauftrag |
| Aenderungsauftraege | Änderungsaufträge |
| Gebaeude | Gebäude |
| gebaeude | gebäude |
| verfuegbar | verfügbar |
| Verfuegbar | Verfügbar |
| Verfuegbarkeit | Verfügbarkeit |
| Pruefung | Prüfung |
| pruefung | prüfung |
| pruefen | prüfen |
| Ueberpruefen | Überprüfen |
| ueberpruefen | überprüfen |
| ueberprueft | überprüft |
| uebermittelt | übermittelt |
| Uebermittelt | Übermittelt |
| Uebersicht | Übersicht |
| uebersicht | übersicht |
| durchfuehren | durchführen |
| Durchfuehren | Durchführen |
| durchgefuehrt | durchgeführt |
| ausfuehren | ausführen |
| Ausfuehrung | Ausführung |
| ausgefuehrt | ausgeführt |
| bestaetigen | bestätigen |
| Bestaetigung | Bestätigung |
| bestaetigt | bestätigt |
| Maengel | Mängel |
| Raeume | Räume |
| raeume | räume |
| Kueche | Küche |
| kueche | küche |
| Tueren | Türen |
| tueren | türen |
| Schlaeuche | Schläuche |
| Qualitaet | Qualität |
| qualitaet | qualität |
| naechste | nächste |
| Naechste | Nächste |
| groesser | größer |
| Groesse | Größe |
| erhoehen | erhöhen |
| Moeglichkeit | Möglichkeit |
| moeglichkeit | möglichkeit |
| moeglich | möglich |
| Moeglich | Möglich |
| muessen | müssen |
| zurueck | zurück |
| Zurueck | Zurück |
| hinzufuegen | hinzufügen |
| Hinzufuegen | Hinzufügen |
| eingefuegt | eingefügt |
| loeschen | löschen |
| Loeschen | Löschen |
| geloescht | gelöscht |
| unterstuetzt | unterstützt |
| Unterstuetzung | Unterstützung |
| erklaeren | erklären |
| Erklaerung | Erklärung |
| spaeter | später |
| Spaeter | Später |
| fuer | für |
| Fuer | Für |
| ueber | über |
| Ueber | Über |

**Important exclusions:**
- Do NOT replace in variable names, function names, or identifiers (keep camelCase/PascalCase as-is)
- Do NOT replace in file paths or route segments (keep `/aenderungsauftraege/` as URL path)
- Do NOT replace in database column names or SQL identifiers
- ONLY replace in:
  - String literals shown to users (UI text)
  - Comments in German
  - Error messages displayed to users

**Process:**
1. Search for each pattern in string literals and comments
2. Apply replacements in affected files
3. Skip false positives (English words, identifiers, URLs)
4. Use NFC normalization: ensure all umlauts are precomposed form
  </action>
  <verify>
- `grep -r "Aenderung\|Gebaeude\|verfuegbar\|Pruefung\|Maengel\|bestaetigt\|uebermittelt\|durchfuehren" src/ --include="*.tsx" --include="*.ts"` returns only false positives (identifiers/URLs) or no matches
- `npm run typecheck` passes
- `npm run build` succeeds
  </verify>
  <done>All German user-facing text uses proper umlauts instead of ae/oe/ue substitutions</done>
</task>

<task type="auto">
  <name>Task 2: Verify corrections and test display</name>
  <files>none (verification only)</files>
  <action>
1. Run final verification:
   ```bash
   # Count remaining ae/oe/ue patterns (should only be in identifiers/URLs)
   grep -r "Aenderung\|Gebaeude\|verfuegbar\|Pruefung\|Maengel\|bestaetigt\|uebermittelt" src/ --include="*.tsx" --include="*.ts" | grep -v "route\|path\|href\|url" | wc -l
   ```

2. Run encoding verification script from Plan 01:
   ```bash
   npm run verify:encoding
   ```
   All files should still be UTF-8/ASCII (files with new umlauts are now UTF-8).

3. Build and type check:
   ```bash
   npm run typecheck
   npm run build
   ```

4. Start dev server and spot-check German text in:
   - Dashboard navigation
   - Change orders page (Änderungsaufträge)
   - Building/unit pages (Gebäude)
   - Inspection forms (Prüfung, Mängel)
   - Settings page
  </action>
  <verify>
- Encoding verification passes
- TypeScript compilation succeeds
- Build completes without errors
- German text displays correctly in browser (no encoding artifacts)
  </verify>
  <done>All German text displays correctly with proper umlauts throughout the application</done>
</task>

</tasks>

<verification>
Phase 34 complete verification:
1. `grep -rE "(Aenderung|Gebaeude|verfuegbar|Pruefung|Maengel)" src/ --include="*.tsx" --include="*.ts" | grep -v "path\|route\|href" | wc -l` returns 0
2. `npm run verify:encoding` passes
3. `npm run typecheck && npm run build` succeeds
4. German text in UI displays with proper umlauts
</verification>

<success_criteria>
- Zero ae/oe/ue substitutions remain in German UI strings
- All 67+ files with German text have proper umlauts
- Application builds and runs correctly
- German text renders correctly in browser (no mojibake, no encoding errors)
</success_criteria>

<output>
After completion, create `.planning/phases/34-german-umlaut-correction/34-02-SUMMARY.md`
</output>
