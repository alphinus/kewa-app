---
phase: 17-admin-onboarding
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - supabase/migrations/045_unit_room_extensions.sql
  - supabase/migrations/046_templates_wbs.sql
  - supabase/MIGRATIONS.md
autonomous: true

must_haves:
  truths:
    - "Migrations 045 and 046 are committed to git"
    - "Migration documentation exists explaining what each migration does"
    - "Migration files are valid SQL that can be applied by Supabase CLI"
  artifacts:
    - path: "supabase/migrations/045_unit_room_extensions.sql"
      provides: "Unit/room schema extensions"
    - path: "supabase/migrations/046_templates_wbs.sql"
      provides: "Templates WBS schema"
    - path: "supabase/MIGRATIONS.md"
      provides: "Migration documentation"
      contains: "045_unit_room_extensions"
  key_links:
    - from: "supabase/MIGRATIONS.md"
      to: "migrations folder"
      via: "documentation references"
      pattern: "045.*046"
---

<objective>
Commit and document migrations 045 and 046 that exist but were never committed.

Purpose: Addresses SEED-01 requirement and STATE.md blocker about uncommitted migrations.
Output: Committed migration files with MIGRATIONS.md documentation.
</objective>

<execution_context>
@C:\Users\Mario Giacchino\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Mario Giacchino\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Existing migrations folder
@supabase/migrations/
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify and stage migration files</name>
  <files>
    supabase/migrations/045_unit_room_extensions.sql
    supabase/migrations/046_templates_wbs.sql
  </files>
  <action>
    1. Check if migrations 045 and 046 exist in supabase/migrations/
    2. If they exist, verify they are valid SQL (no syntax errors on visual inspection)
    3. If they don't exist, check if they're in a different location or need to be created from combined_migrations.sql
    4. Stage the migration files for commit

    Note: These migrations were created during phases 15-16 but never committed per STATE.md blocker.
  </action>
  <verify>
    - `ls supabase/migrations/045*.sql` shows file
    - `ls supabase/migrations/046*.sql` shows file
    - `git status` shows both files staged
  </verify>
  <done>Both migration files exist and are staged for commit</done>
</task>

<task type="auto">
  <name>Task 2: Create migration documentation</name>
  <files>supabase/MIGRATIONS.md</files>
  <action>
    Create or update supabase/MIGRATIONS.md with:

    1. Header explaining migration purpose
    2. Table of all migrations with:
       - Number (001-046)
       - Name
       - Purpose (one-line description)
       - Date added
    3. Detailed section for each migration explaining:
       - Tables created/modified
       - Columns added
       - Constraints and indexes
       - RLS policies
    4. Instructions for running migrations locally:
       - `supabase db push` for local
       - `supabase migration up` for production

    Focus documentation on 045 and 046 but include summary of earlier migrations for context.
  </action>
  <verify>
    - File exists at supabase/MIGRATIONS.md
    - Contains documentation for 045_unit_room_extensions
    - Contains documentation for 046_templates_wbs
    - Includes run instructions
  </verify>
  <done>MIGRATIONS.md exists with comprehensive documentation of all migrations</done>
</task>

<task type="auto">
  <name>Task 3: Commit migrations and documentation</name>
  <files>
    supabase/migrations/045_unit_room_extensions.sql
    supabase/migrations/046_templates_wbs.sql
    supabase/MIGRATIONS.md
  </files>
  <action>
    Commit all three files with descriptive message:
    - Stage: `git add supabase/migrations/045*.sql supabase/migrations/046*.sql supabase/MIGRATIONS.md`
    - Commit: Message explaining this resolves the SEED-01 requirement

    This resolves the STATE.md blocker: "Migrations 045, 046 exist but are not committed"
  </action>
  <verify>
    - `git log -1` shows commit with migration files
    - `git status` shows clean working tree for these files
  </verify>
  <done>Migrations and documentation committed to git</done>
</task>

</tasks>

<verification>
- [ ] migrations 045 and 046 exist in supabase/migrations/
- [ ] MIGRATIONS.md documents both migrations
- [ ] All files committed to git
- [ ] STATE.md blocker can be removed
</verification>

<success_criteria>
SEED-01 requirement satisfied: Migrations 045 and 046 are committed with documentation
</success_criteria>

<output>
After completion, create `.planning/phases/17-admin-onboarding/17-01-SUMMARY.md`
</output>
