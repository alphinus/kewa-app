---
phase: 39-navigation-redesign
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/navigation/DashboardBreadcrumbs.tsx
  - src/app/dashboard/aufgaben/page.tsx
  - src/app/dashboard/auftraege/page.tsx
  - "src/app/dashboard/aufgaben/[id]/page.tsx"
  - "src/app/dashboard/auftraege/[id]/page.tsx"
  - src/app/dashboard/auftraege/neu/page.tsx
  - src/app/dashboard/kosten/page.tsx
  - src/app/dashboard/kosten/ausgaben/page.tsx
  - "src/app/dashboard/kosten/ausgaben/[id]/page.tsx"
  - src/app/dashboard/kosten/ausgaben/neu/page.tsx
  - src/app/dashboard/kosten/rechnungen/page.tsx
  - "src/app/dashboard/kosten/rechnungen/[id]/page.tsx"
  - src/app/dashboard/kosten/rechnungen/neu/page.tsx
  - src/app/dashboard/kosten/wohnungen/page.tsx
  - "src/app/dashboard/kosten/wohnungen/[id]/page.tsx"
  - "src/app/dashboard/kosten/projekte/[id]/page.tsx"
  - src/app/dashboard/kosten/export/page.tsx
  - src/app/dashboard/projekte/page.tsx
  - "src/app/dashboard/projekte/[id]/page.tsx"
  - "src/app/dashboard/projekte/[id]/aenderungsauftraege/page.tsx"
  - src/app/dashboard/lieferanten/page.tsx
  - "src/app/dashboard/lieferanten/[id]/page.tsx"
  - src/app/dashboard/lieferanten/bestellungen/page.tsx
  - "src/app/dashboard/lieferanten/bestellungen/[id]/page.tsx"
  - src/app/dashboard/lieferanten/bestellungen/neu/page.tsx
  - src/app/dashboard/lieferanten/bestand/page.tsx
  - "src/app/dashboard/lieferanten/bestand/[propertyId]/page.tsx"
  - src/app/dashboard/lieferanten/analytics/preise/page.tsx
  - src/app/dashboard/lieferanten/analytics/verbrauch/page.tsx
  - src/app/dashboard/berichte/page.tsx
  - src/app/dashboard/settings/page.tsx
  - src/app/dashboard/settings/benachrichtigungen/page.tsx
  - src/app/dashboard/abnahmen/page.tsx
  - src/app/dashboard/abnahmen/neu/page.tsx
  - "src/app/dashboard/abnahmen/[id]/page.tsx"
  - "src/app/dashboard/abnahmen/[id]/checkliste/page.tsx"
  - "src/app/dashboard/abnahmen/[id]/unterschrift/page.tsx"
  - "src/app/dashboard/abnahmen/[id]/maengel/page.tsx"
  - src/app/dashboard/aenderungsauftraege/page.tsx
  - src/app/dashboard/aenderungsauftraege/neu/page.tsx
  - "src/app/dashboard/aenderungsauftraege/[id]/page.tsx"
  - "src/app/dashboard/aenderungsauftraege/[id]/bearbeiten/page.tsx"
  - src/app/dashboard/knowledge/page.tsx
  - src/app/dashboard/knowledge/new/page.tsx
  - "src/app/dashboard/knowledge/[id]/page.tsx"
  - "src/app/dashboard/knowledge/[id]/edit/page.tsx"
  - "src/app/dashboard/knowledge/category/[id]/page.tsx"
  - src/app/dashboard/audio/page.tsx
  - src/app/dashboard/benachrichtigungen/page.tsx
  - src/app/dashboard/vorlagen/abnahmen/page.tsx
  - "src/app/dashboard/vorlagen/abnahmen/[id]/page.tsx"
  - src/app/dashboard/vorlagen/abnahmen/neu/page.tsx
  - src/app/dashboard/tasks/page.tsx
  - src/app/dashboard/partner/page.tsx
  - src/app/dashboard/admin/properties/page.tsx
autonomous: true
requirements:
  - NAV-01
gap_closure: true

must_haves:
  truths:
    - "Breadcrumbs display on all dashboard pages (not just /objekte)"
    - "Non-objekte pages show 'Übersicht > PageName' breadcrumb pattern per D3"
    - "No dashboard page (except /dashboard home) renders without DashboardBreadcrumbs"
    - "The aufgaben page uses DashboardBreadcrumbs, not the old ui/breadcrumbs component"
  artifacts:
    - path: "src/components/navigation/DashboardBreadcrumbs.tsx"
      provides: "SEGMENT_LABELS entries for all sub-route segments"
      contains: "ausgaben"
    - path: "src/app/dashboard/aufgaben/page.tsx"
      provides: "DashboardBreadcrumbs replacing old Breadcrumbs"
      contains: "DashboardBreadcrumbs"
    - path: "src/app/dashboard/auftraege/page.tsx"
      provides: "DashboardBreadcrumbs replacing old Breadcrumbs"
      contains: "DashboardBreadcrumbs"
    - path: "src/app/dashboard/kosten/page.tsx"
      provides: "DashboardBreadcrumbs added to kosten overview"
      contains: "DashboardBreadcrumbs"
    - path: "src/app/dashboard/settings/page.tsx"
      provides: "DashboardBreadcrumbs added to settings"
      contains: "DashboardBreadcrumbs"
  key_links:
    - from: "all non-objekte dashboard pages"
      to: "src/components/navigation/DashboardBreadcrumbs.tsx"
      via: "import and render"
      pattern: "import.*DashboardBreadcrumbs"
---

<objective>
Add DashboardBreadcrumbs to all existing non-objekte dashboard pages, closing the NAV-01 gap.

Purpose: NAV-01 requires breadcrumbs on ALL dashboard pages. The component exists and works but was only added to 5 /objekte pages. This plan adds it to the remaining 54 pages.
Output: Every dashboard page (except /dashboard home) renders DashboardBreadcrumbs.
</objective>

<execution_context>
@C:/Users/Mario Giacchino/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Mario Giacchino/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/39-navigation-redesign/39-CONTEXT.md
@.planning/phases/39-navigation-redesign/39-VERIFICATION.md
@src/components/navigation/DashboardBreadcrumbs.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add missing SEGMENT_LABELS and replace old Breadcrumbs in aufgaben + auftraege</name>
  <files>
    src/components/navigation/DashboardBreadcrumbs.tsx
    src/app/dashboard/aufgaben/page.tsx
    src/app/dashboard/auftraege/page.tsx
  </files>
  <action>
**1. Add missing SEGMENT_LABELS entries to DashboardBreadcrumbs.tsx:**

The existing SEGMENT_LABELS map covers top-level segments but is missing sub-route segments that appear in the URL. Add these entries to the SEGMENT_LABELS object:

```typescript
ausgaben: 'Ausgaben',
rechnungen: 'Rechnungen',
wohnungen: 'Wohnungen',
bestellungen: 'Bestellungen',
bestand: 'Bestand',
auftraege: 'Aufträge',
maengel: 'Mängel',
checkliste: 'Checkliste',
unterschrift: 'Unterschrift',
export: 'Export',
analytics: 'Analytics',
preise: 'Preise',
verbrauch: 'Verbrauch',
neu: 'Neu',
new: 'Neu',
edit: 'Bearbeiten',
bearbeiten: 'Bearbeiten',
category: 'Kategorie',
tasks: 'Aufgaben',
partner: 'Partner',
admin: 'Administration',
properties: 'Liegenschaften',
```

**2. Replace old Breadcrumbs in `src/app/dashboard/aufgaben/page.tsx`:**

- Remove: `import { Breadcrumbs } from '@/components/ui/breadcrumbs'` (line 10)
- Add: `import { DashboardBreadcrumbs } from '@/components/navigation/DashboardBreadcrumbs'`
- Replace `<Breadcrumbs />` (line 191) with `<DashboardBreadcrumbs />`

**3. Replace old Breadcrumbs in `src/app/dashboard/auftraege/page.tsx`:**

This is a SERVER component (no 'use client' directive). DashboardBreadcrumbs is a 'use client' component — it can be imported and rendered in server components (Next.js handles this automatically).

- Remove: `import { Breadcrumbs } from '@/components/ui/breadcrumbs'` (line 21)
- Add: `import { DashboardBreadcrumbs } from '@/components/navigation/DashboardBreadcrumbs'`
- Replace `<Breadcrumbs />` (line 173) with `<DashboardBreadcrumbs />`
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm no type errors. Grep for `import.*Breadcrumbs.*ui/breadcrumbs` in aufgaben/page.tsx and auftraege/page.tsx — should return zero matches. Grep for `DashboardBreadcrumbs` in both files — should return matches.
  </verify>
  <done>
SEGMENT_LABELS covers all sub-route segments (ausgaben, rechnungen, wohnungen, bestellungen, bestand, auftraege, maengel, checkliste, unterschrift, export, analytics, preise, verbrauch, neu, new, edit, bearbeiten, category, tasks, partner, admin, properties). The aufgaben and auftraege pages use DashboardBreadcrumbs instead of the old ui/breadcrumbs component.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add DashboardBreadcrumbs to all remaining dashboard pages</name>
  <files>
    src/app/dashboard/aufgaben/[id]/page.tsx
    src/app/dashboard/auftraege/[id]/page.tsx
    src/app/dashboard/auftraege/neu/page.tsx
    src/app/dashboard/kosten/page.tsx
    src/app/dashboard/kosten/ausgaben/page.tsx
    src/app/dashboard/kosten/ausgaben/[id]/page.tsx
    src/app/dashboard/kosten/ausgaben/neu/page.tsx
    src/app/dashboard/kosten/rechnungen/page.tsx
    src/app/dashboard/kosten/rechnungen/[id]/page.tsx
    src/app/dashboard/kosten/rechnungen/neu/page.tsx
    src/app/dashboard/kosten/wohnungen/page.tsx
    src/app/dashboard/kosten/wohnungen/[id]/page.tsx
    src/app/dashboard/kosten/projekte/[id]/page.tsx
    src/app/dashboard/kosten/export/page.tsx
    src/app/dashboard/projekte/page.tsx
    src/app/dashboard/projekte/[id]/page.tsx
    src/app/dashboard/projekte/[id]/aenderungsauftraege/page.tsx
    src/app/dashboard/lieferanten/page.tsx
    src/app/dashboard/lieferanten/[id]/page.tsx
    src/app/dashboard/lieferanten/bestellungen/page.tsx
    src/app/dashboard/lieferanten/bestellungen/[id]/page.tsx
    src/app/dashboard/lieferanten/bestellungen/neu/page.tsx
    src/app/dashboard/lieferanten/bestand/page.tsx
    src/app/dashboard/lieferanten/bestand/[propertyId]/page.tsx
    src/app/dashboard/lieferanten/analytics/preise/page.tsx
    src/app/dashboard/lieferanten/analytics/verbrauch/page.tsx
    src/app/dashboard/berichte/page.tsx
    src/app/dashboard/settings/page.tsx
    src/app/dashboard/settings/benachrichtigungen/page.tsx
    src/app/dashboard/abnahmen/page.tsx
    src/app/dashboard/abnahmen/neu/page.tsx
    src/app/dashboard/abnahmen/[id]/page.tsx
    src/app/dashboard/abnahmen/[id]/checkliste/page.tsx
    src/app/dashboard/abnahmen/[id]/unterschrift/page.tsx
    src/app/dashboard/abnahmen/[id]/maengel/page.tsx
    src/app/dashboard/aenderungsauftraege/page.tsx
    src/app/dashboard/aenderungsauftraege/neu/page.tsx
    src/app/dashboard/aenderungsauftraege/[id]/page.tsx
    src/app/dashboard/aenderungsauftraege/[id]/bearbeiten/page.tsx
    src/app/dashboard/knowledge/page.tsx
    src/app/dashboard/knowledge/new/page.tsx
    src/app/dashboard/knowledge/[id]/page.tsx
    src/app/dashboard/knowledge/[id]/edit/page.tsx
    src/app/dashboard/knowledge/category/[id]/page.tsx
    src/app/dashboard/audio/page.tsx
    src/app/dashboard/benachrichtigungen/page.tsx
    src/app/dashboard/vorlagen/abnahmen/page.tsx
    src/app/dashboard/vorlagen/abnahmen/[id]/page.tsx
    src/app/dashboard/vorlagen/abnahmen/neu/page.tsx
    src/app/dashboard/tasks/page.tsx
    src/app/dashboard/partner/page.tsx
    src/app/dashboard/admin/properties/page.tsx
  </files>
  <action>
For EVERY file listed above, apply this mechanical two-step edit:

**Step A — Add import:**

Add this import line near the top of the file with other component imports:
```typescript
import { DashboardBreadcrumbs } from '@/components/navigation/DashboardBreadcrumbs'
```

**Step B — Render the component:**

Find the outermost return JSX wrapper (typically a `<div>` with `className="space-y-..."` or similar). Add `<DashboardBreadcrumbs />` as the FIRST child inside that wrapper. If the page has a header section (h1 tag), place breadcrumbs BEFORE the header.

**Pattern for server components** (no 'use client' at top — most pages):
```tsx
return (
  <div className="space-y-6 pb-20">
    <DashboardBreadcrumbs />
    {/* existing header and content */}
  </div>
)
```

**Pattern for client components** ('use client' at top):
Same approach — add `<DashboardBreadcrumbs />` as first child in the return JSX wrapper.

**Special cases to handle:**

1. **Pages with loading/error early returns** (e.g. settings/page.tsx has `if (loading) return ...` and `if (error) return ...`): Add `<DashboardBreadcrumbs />` ONLY in the main return block, NOT in the early-return loading/error blocks. The breadcrumb is a lightweight client component that renders from the URL — no data dependency.

2. **Pages wrapped in Suspense** (like aufgaben/[id]/page.tsx may have a Suspense wrapper): Add the import at the file top. If there's a Suspense wrapper in the default export, add `<DashboardBreadcrumbs />` inside the inner content component that Suspense wraps, not outside Suspense.

3. **No `labels` prop needed**: For non-objekte pages, UUID segments in the URL are handled by the truncation fallback. No labels prop is required.

**Do NOT add DashboardBreadcrumbs to:**
- `src/app/dashboard/page.tsx` (home page — component returns null here anyway, but don't add it)
- Any `/objekte/` pages (already have it)
- Any redirect stub pages (liegenschaft, gebaude, einheiten, wohnungen)
  </action>
  <verify>
1. Run `npx tsc --noEmit` — zero type errors.
2. Run a grep for `DashboardBreadcrumbs` across ALL `src/app/dashboard/**/page.tsx` files. Every page EXCEPT `/dashboard/page.tsx` and redirect stubs should contain the import.
3. Count: At least 57 dashboard page files should contain `DashboardBreadcrumbs` (5 objekte + 52 from this task).
  </verify>
  <done>
Every non-objekte, non-redirect dashboard page renders `<DashboardBreadcrumbs />` at the top of its content. The component handles URL parsing and German label resolution automatically. NAV-01 acceptance criteria ("breadcrumbs render on all dashboard pages") is satisfied.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with zero errors
2. Grep `DashboardBreadcrumbs` across `src/app/dashboard/**/page.tsx` — all pages except `/dashboard/page.tsx` and 6 redirect stubs contain it
3. Grep `import.*Breadcrumbs.*ui/breadcrumbs` across entire src/ — zero matches in any page file (old component fully replaced)
4. SEGMENT_LABELS in DashboardBreadcrumbs.tsx covers all sub-route segments (ausgaben, rechnungen, wohnungen, bestellungen, bestand, auftraege, maengel, checkliste, unterschrift, export, analytics, preise, verbrauch, neu, new, edit, bearbeiten, category, tasks, partner, admin, properties)
5. `/dashboard` home page does NOT have DashboardBreadcrumbs (component returns null there anyway, but no import needed)
</verification>

<success_criteria>
- DashboardBreadcrumbs renders on all ~57 dashboard pages (5 objekte + 52 others)
- Old ui/breadcrumbs import removed from aufgaben and auftraege pages
- SEGMENT_LABELS covers all URL segments with correct German labels
- No TypeScript errors
- NAV-01 acceptance criteria fully satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/39-navigation-redesign/39-05-SUMMARY.md`
</output>
