# Performance Baseline: v3.1 Phase 31

**Date:** 2026-02-05
**Phase:** 31 - Performance Profiling & Baseline
**Reference:** v3.1-phase31-baseline.json

## Core Web Vitals (Login Page)

| Metric | Value | Target | Status |
|--------|-------|--------|--------|
| Performance Score | 83 | >= 75 | PASS |
| LCP (Largest Contentful Paint) | 3204ms | < 4000ms | PASS |
| TBT (Total Blocking Time)* | 338ms | < 200ms | WARN |
| CLS (Cumulative Layout Shift) | 0.000 | < 0.1 | PASS |
| TTI (Time to Interactive) | 3204ms | < 7000ms | PASS |
| FCP (First Contentful Paint) | 1354ms | < 1800ms | PASS |
| SI (Speed Index) | 4022ms | - | - |

*TBT used as INP proxy in synthetic testing. INP requires real user interaction.

## Lighthouse Test Details

- **Runs:** 3 (median values reported)
- **Tool:** Lighthouse 12.6.1 via @lhci/cli
- **Environment:** Node 24.11.1, Next.js 16.1.6 (Turbopack)
- **Page:** /login (unauthenticated)

### Raw Run Data

| Run | Score | LCP (ms) | FCP (ms) | TBT (ms) | CLS |
|-----|-------|----------|----------|----------|-----|
| 1 | 83 | 3204 | 1432 | 354 | 0.000 |
| 2 | 93 | 1546 | 946 | 293 | 0.000 |
| 3 | 83 | 3217 | 1354 | 338 | 0.000 |

## Bundle Analysis

### Total Client JavaScript

**2.27 MB** (2321 KB) across all chunks

### Top 10 Chunks by Size

| Rank | Chunk | Size (KB) | Contents |
|------|-------|-----------|----------|
| 1 | 7300-*.js | 337 | Recharts, D3, Lucide icons |
| 2 | 4bd1b696-*.js | 194 | React-DOM, Lucide icons |
| 3 | 6011-*.js | 192 | ProseMirror (TipTap foundation) |
| 4 | framework-*.js | 185 | React framework |
| 5 | 9826-*.js | 184 | Shared modules |
| 6 | 3242-*.js | 177 | Supabase client |
| 7 | main-*.js | 126 | Next.js runtime |
| 8 | polyfills-*.js | 110 | Browser polyfills |
| 9 | 70e0d97a-*.js | 94 | Additional shared |
| 10 | 1400-*.js | 93 | Additional shared |

### Top 10 Dependencies by Bundle Impact

| Rank | Package | Est. Size (KB) | Purpose |
|------|---------|----------------|---------|
| 1 | recharts | 337 | Charts and analytics dashboards |
| 2 | react-dom | 200 | React rendering engine |
| 3 | prosemirror/* | 192 | TipTap editor foundation |
| 4 | @supabase/* | 177 | Database client and auth |
| 5 | lucide-react | 150 | Icon library (tree-shaken) |
| 6 | @tiptap/* | 100 | Rich text editor |
| 7 | date-fns | 50 | Date formatting utilities |
| 8 | dexie | 45 | IndexedDB for offline support |
| 9 | @react-pdf/renderer | 40 | PDF generation (lazy loaded) |
| 10 | qrcode.react | 20 | QR code generation |

## Optimization Opportunities

### High Impact (Phase 33 Targets)

1. **Recharts (337KB)** - Consider lightweight alternatives or lazy loading for chart pages
2. **ProseMirror/TipTap (292KB combined)** - Lazy load rich text editor only where needed
3. **Lucide icons (150KB)** - Review if all icons are necessary, optimize imports

### Medium Impact

4. **Supabase (177KB)** - Consider splitting auth vs realtime if not all needed
5. **Polyfills (110KB)** - Review if all polyfills needed for target browsers

## Notes

- Authenticated pages (dashboard, projects, inspections) require manual testing
- Run `npm run lighthouse:auth` with LIGHTHOUSE_TEST_PIN for authenticated metrics
- Full Lighthouse HTML reports in `.planning/baselines/run*.lighthouse.json` (gitignored)
- Bundle analyzer reports in `.next/analyze/` (regenerate with `npx cross-env ANALYZE=true npx next build --webpack`)

## Comparison Targets

This baseline will be compared after:
- **Phase 32:** Database Optimization (query performance)
- **Phase 33:** Bundle & Rendering Optimization (target: 100KB+ reduction)

### Phase 33 Goals

| Metric | Current | Target | Reduction |
|--------|---------|--------|-----------|
| Total JS | 2321KB | 2100KB | -220KB (10%) |
| LCP | 3204ms | 2500ms | -700ms (22%) |
| TBT | 338ms | 200ms | -138ms (41%) |

---
*Generated by Phase 31-03 baseline collection*
*Machine-readable data: v3.1-phase31-baseline.json*
